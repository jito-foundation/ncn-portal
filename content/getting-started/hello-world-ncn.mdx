# Hello World NCN

This tutorial will guide you through building a Hello World NCN (Node Consensus Network) on Jito Restaking. 

## Overview

The Hello World NCN is a simple implementation that demonstrates:

### By Jito Restaking:

1. Register all components
    - Registering NCN
    - Registering Operators who will perform work
    - Registering Vault that delegate the asset to operators

2. Opt-in all components

3. Delegate the asset from Vault to Operator

### NCN Program
    - Admin creating messages that need to be processe by Operators
    - Operators responding to these messages and submitting signed responses
    - The program verifying the operator's work through on-chain validation

## Key Components

### Components in the NCN program

1. Configuration

2. Message

3. BallotBox

## Let's Build

Clone the [repo](https://github.com/aoikurokawa/hello-world-ncn).

### Prerequisites

- [Rust] installed
- [Solana CLI] installed
- [Jito Restaking CLI] installed

[Rust]: https://www.rust-lang.org/tools/install
[Solana CLI]: https://solana.com/docs/intro/installation
[Jito Restaking CLI]: https://github.com/jito-foundation/restaking/blob/master/cli/getting_started.md

### Register All Components


### NCN

Create NCN Admin keypair

```bash
solana-keygen grind --starts-with ncn:1
mkdir -p credentials/ncn
mv ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json ./credentials/ncn/
```

Faucet: https://faucet.solana.com/


Initialize NCN

```bash
./jito-restaking-cli restaking ncn initialize \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

Initialized NCN!!

zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM


### Operators

Create Operators Admin Keypair

```bash
solana-keygen grind --starts-with ope:1
mkdir -p credentials/operator
mv opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json ./credentials/ope/
```

Faucet: https://faucet.solana.com/

Initialize Operator

```bash
./jito-restaking-cli restaking operator initialize 1000 \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

Initialized Operator!

- Operator 1: 6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj
- Operator 2: DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg
- Operator 3: 9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z

### Vault

Create SPL token

```bash
spl-token  create-token
```

SPL-Token:

5Xk7TaAWWxCTiW1TsM4JVJkxqzFwbTAG1SBMWPfwMwT

Create Vault Admin Keypair

```bash
solana-keygen grind --starts-with vau:1
mkdir -p credentials/vault
mv vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json ./credentials/vault/
```

Faucet: https://faucet.solana.com/

Initialize Vault

```bash
./jito-restaking-cli \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json \
    --rpc-url 'https://api.devnet.solana.com' 
    vault vault initialize '5Xk7TaAWWxCTiW1TsM4JVJkxqzFwbTAG1SBMWPfwMwT' 1000 1000 1000 9
```

VRT Token: 7Xe8hbtYDh1H4NeLDoG23gvcyeGnJCbmwobvbCwbsjtp
Vault: 4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA


### Opt-in

#### NCN

##### NCN | Operator

##### Initialize NCN Operator State

###### Operator 1

```bash
./jito-restaking-cli \
    restaking ncn initialize-ncn-operator-state \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

###### Operator 2

```bash
./jito-restaking-cli \
    restaking ncn initialize-ncn-operator-state \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

###### Operator 3

```bash
./jito-restaking-cli \
    restaking ncn initialize-ncn-operator-state \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

##### Warm Up NCN Operator State

###### Operator 1

```bash
./jito-restaking-cli \
    restaking ncn ncn-warmup-operator \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

###### Operator 2

```bash
./jito-restaking-cli \
    restaking ncn ncn-warmup-operator \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

###### Operator 3

```bash
./jito-restaking-cli \
    restaking ncn ncn-warmup-operator \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

#### NCN | Vault

Initialize

```bash
./jito-restaking-cli \
    restaking ncn initialize-ncn-vault-ticket \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

Warm Up

```bash
./jito-restaking-cli \
    restaking ncn warmup-ncn-vault-ticket \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/ncn/ncnnteNRPccbg5mpwuJbzmBvVexHcoDWmZnLKybr8XA.json
```

#### Operator

##### Operator | NCN

Warm Up

- Operator 1

```bash
./jito-restaking-cli \
    restaking operator operator-warmup-ncn \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 2

```bash
./jito-restaking-cli \
    restaking operator operator-warmup-ncn \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 3

```bash
./jito-restaking-cli \
    restaking operator operator-warmup-ncn \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

##### Operator | Vault

Initialize

- Operator 1

```bash
./jito-restaking-cli \
    restaking operator initialize-operator-vault-ticket \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 2

```bash
./jito-restaking-cli \
    restaking operator initialize-operator-vault-ticket \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 3

```bash
./jito-restaking-cli \
    restaking operator initialize-operator-vault-ticket \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```


warmup-operator-vault-ticket

- Operator 1

```bash
./jito-restaking-cli \
    restaking operator warmup-operator-vault-ticket \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 2

```bash
./jito-restaking-cli \
    restaking operator warmup-operator-vault-ticket \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

- Operator 3

```bash
./jito-restaking-cli \
    restaking operator warmup-operator-vault-ticket \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/operator/opeKDrPSPhLYFFRpsPTLU6o86f4AFcFvNMRvbdifhvq.json
```

#### Vault

##### Vault | NCN

Initialize

```bash
./jito-restaking-cli \
    vault vault initialize-vault-ncn-ticket \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

Warm Up

```bash
./jito-restaking-cli \
    vault vault warmup-vault-ncn-ticket \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    'zSy3NQbg13YaKVNu2zh6cZ15VtQyMeQWXc1dzzxx6LM' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

##### Vault | Operator


Create ATA

```bash
spl-token create-account 5Xk7TaAWWxCTiW1TsM4JVJkxqzFwbTAG1SBMWPfwMwT
```

Mint Supported Token

```bash
spl-token mint 5Xk7TaAWWxCTiW1TsM4JVJkxqzFwbTAG1SBMWPfwMwT 3000
```

Mint VRT

```bash
./jito-restaking-cli vault vault mint-vrt 4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA 3000 0
```

Initialize Operator Delegation

###### Operator 1

```bash
./jito-restaking-cli \
    vault vault initialize-operator-delegation \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

###### Operator 2 

```bash
./jito-restaking-cli \
    vault vault initialize-operator-delegation \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

###### Operator 3 

```bash
./jito-restaking-cli \
    vault vault initialize-operator-delegation \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

Warm up

###### Operator 1

```bash
./jito-restaking-cli \
    vault vault delegate-to-operator \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    '6BeXz72E9yn8JgkfzjiPdsnaE8PppbdpKTGDi7H7bsZj' \
    100 \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

###### Operator 2 

```bash
./jito-restaking-cli \
    vault vault delegate-to-operator \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    'DqwU1gHAN55PJWX25Kvopkny2ENddCjWdqX68VEWPLQg' \
    100 \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

###### Operator 3 

```bash
./jito-restaking-cli \
    vault vault delegate-to-operator \
    '4wmTjgjB4SDgh4mxUtmpYhoGqFi9ECNZmdmuEH7K99JA' \
    '9sMvk2pvMnPusPZWuEim5dp6JPvfM5KKmLjgRV4uw61z' \
    100 \
    --rpc-url 'https://api.devnet.solana.com' \
    --keypair ./credentials/vault/vauBPs8vKk3tdqYkTji15xvLvDrkdowFvS4F3RapmBN.json
```

### NCN On-Chain Program

